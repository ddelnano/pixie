diff --git a/clang/tools/clang-shlib/CMakeLists.txt b/clang/tools/clang-shlib/CMakeLists.txt
index a4d0aa577..e7294f0d4 100644
--- a/clang/tools/clang-shlib/CMakeLists.txt
+++ b/clang/tools/clang-shlib/CMakeLists.txt
@@ -3,6 +3,8 @@ if (NOT LLVM_ENABLE_PIC)
   return()
 endif()
 
+return()
+
 get_property(clang_libs GLOBAL PROPERTY CLANG_STATIC_LIBS)
 
 foreach (lib ${clang_libs})
diff --git a/clang/tools/libclang/CMakeLists.txt b/clang/tools/libclang/CMakeLists.txt
index 2b1e266f0..6a58ffe3e 100644
--- a/clang/tools/libclang/CMakeLists.txt
+++ b/clang/tools/libclang/CMakeLists.txt
@@ -112,7 +112,8 @@ if(LLVM_ENABLE_PIC OR ((WIN32 OR CYGWIN) AND NOT LIBCLANG_BUILD_STATIC))
 endif()
 
 if(NOT LLVM_ENABLE_PIC OR LIBCLANG_BUILD_STATIC)
-  set(ENABLE_STATIC STATIC)
+  #   set(ENABLE_STATIC STATIC)
+  unset(ENABLE_SHARED)
 endif()
 
 if (MSVC AND ENABLE_SHARED AND ENABLE_STATIC)
